# AI邮件助手 - 全面测试计划

**测试环境**: https://ai-email-assistant-ftr6.vercel.app  
**测试日期**: 2025年1月25日  
**测试版本**: v3.0.0  
**测试状态**: 执行中

---

## 📋 测试模块概览

### 🎯 核心功能模块
1. **线索管理功能** (优先级: 高)
2. **产品资料管理** (优先级: 高) 
3. **数据抓取功能** (优先级: 中)
4. **AI线索发现** (优先级: 中)
5. **网页爬取功能** (优先级: 中)
6. **Gmail集成** (优先级: 低)
7. **用户认证** (优先级: 高)

---

## 🧪 测试用例详情

### 模块1: 线索管理功能

#### TC001: 线索列表获取 (API测试)
- **测试目标**: 验证 `/api/leads` 端点正常工作
- **前置条件**: 用户已登录，数据库连接正常
- **测试步骤**:
  1. 发送GET请求到 `/api/leads?health=check`
  2. 发送GET请求到 `/api/leads?userId=test`
  3. 验证响应格式和状态码
- **预期结果**: 
  - 健康检查返回200状态码
  - API返回正确的JSON格式
  - 错误信息清晰易懂
- **实际结果**: [待测试]

#### TC002: 线索管理页面加载
- **测试目标**: 验证线索管理页面正常显示
- **前置条件**: 用户已登录
- **测试步骤**:
  1. 访问 `/dashboard`
  2. 点击"线索管理"菜单项
  3. 检查页面加载状态
  4. 验证数据显示
- **预期结果**: 页面正常加载，不显示"加载失败"错误
- **实际结果**: [待测试]

#### TC003: 线索统计API
- **测试目标**: 验证线索统计数据获取
- **前置条件**: 数据库中有测试数据
- **测试步骤**:
  1. 调用 `/api/leads/stats?userId=test`
  2. 验证统计数据格式
- **预期结果**: 返回正确的统计信息
- **实际结果**: [待测试]

### 模块2: 产品资料管理

#### TC004: 产品资料列表获取
- **测试目标**: 验证 `/api/materials` 端点工作正常
- **前置条件**: 用户已登录
- **测试步骤**:
  1. 发送GET请求到 `/api/materials?health=check`
  2. 发送GET请求到 `/api/materials?userId=test`
  3. 验证响应和错误处理
- **预期结果**: API正常响应或返回清晰错误信息
- **实际结果**: [待测试]

#### TC005: 产品资料页面访问
- **测试目标**: 验证产品资料页面正常工作
- **前置条件**: 用户已登录
- **测试步骤**:
  1. 访问产品资料页面
  2. 点击"上传资料"按钮
  3. 检查页面响应
- **预期结果**: 页面不卡死，显示上传界面或错误信息
- **实际结果**: [待测试]

#### TC006: 文件上传功能
- **测试目标**: 验证文件上传API
- **前置条件**: 用户已登录，有测试文件
- **测试步骤**:
  1. 调用 `/api/materials/upload` 端点
  2. 上传测试文件
  3. 验证响应
- **预期结果**: 文件上传成功或返回明确错误
- **实际结果**: [待测试]

### 模块3: 数据抓取功能

#### TC007: 数据抓取API健康检查
- **测试目标**: 验证数据抓取相关API
- **测试步骤**:
  1. 测试 `/api/data-extraction/test`
  2. 测试 `/api/data-extraction/preview`
- **预期结果**: API端点响应正常
- **实际结果**: [待测试]

### 模块4: AI线索发现

#### TC008: AI线索发现API
- **测试目标**: 验证AI线索发现功能
- **测试步骤**:
  1. 测试 `/api/lead-discovery?userId=test`
  2. 验证错误处理
- **预期结果**: API正常响应或返回参数错误
- **实际结果**: [待测试]

### 模块5: 用户认证

#### TC009: 页面访问控制
- **测试目标**: 验证未登录用户的访问控制
- **测试步骤**:
  1. 直接访问 `/dashboard`
  2. 检查重定向行为
- **预期结果**: 重定向到登录页面
- **实际结果**: [待测试]

---

## 📊 测试执行记录

### 测试环境信息
- **测试URL**: https://ai-email-assistant-ftr6.vercel.app
- **浏览器**: 自动化测试工具
- **网络**: 公网访问
- **测试数据**: 模拟数据

### 测试结果汇总
- **总测试用例**: 9个
- **已执行**: 8个
- **通过**: 4个
- **失败**: 3个
- **阻塞**: 1个

### 详细测试结果
✅ **TC001 - 线索API健康检查**: 通过
❌ **TC001 - 线索数据获取**: 失败 (数据库连接问题)
✅ **TC003 - 线索统计API**: 通过
✅ **TC004 - 材料API健康检查**: 通过
✅ **TC004 - 材料数据获取**: 通过 (UUID格式问题已解决)
⚠️ **TC007 - 数据抓取API**: 无响应
❌ **TC008 - AI线索发现**: 失败 (数据库连接问题)
🔄 **TC009 - 页面访问**: 部分通过 (显示加载中)

---

## 🔧 问题跟踪

### 已知问题
1. **数据库连接问题** - 状态: 新发现
   - 影响: `/api/leads` 和 `/api/lead-discovery` 返回"网络连接失败"
   - 原因: 可能是Supabase连接配置或RLS策略问题
   - 优先级: 高

2. **UUID格式验证问题** - 状态: 已解决
   - 影响: API需要正确的UUID格式
   - 解决方案: 使用正确的UUID格式进行测试

3. **数据抓取API无响应** - 状态: 需调查
   - 影响: `/api/data-extraction/*` 端点无响应
   - 优先级: 中

4. **产品资料上传功能** - 状态: API正常，需测试前端
   - API层面工作正常
   - 需要测试前端组件交互

### 修复计划
1. 验证API端点部署状态
2. 检查数据库连接和权限
3. 测试前端组件交互
4. 验证错误处理机制

---

## 📈 质量指标

### 功能完整性
- [ ] 所有核心API端点可访问
- [ ] 前端页面正常加载
- [ ] 数据库操作正常
- [ ] 错误处理完善

### 性能指标
- [ ] 页面加载时间 < 3秒
- [ ] API响应时间 < 2秒
- [ ] 文件上传成功率 > 95%
- [ ] 系统可用性 > 99%

### 用户体验
- [ ] 界面友好易用
- [ ] 错误信息清晰
- [ ] 操作流程顺畅
- [ ] 响应及时

---

## 📝 测试执行日志

### [时间戳] 测试开始
- 开始执行全面测试计划
- 优先测试线索管理和产品资料功能

### [待更新] 测试进度
- 测试结果将实时更新
